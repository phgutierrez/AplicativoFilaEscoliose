
{% extends 'base.html' %}
{% block content %}
<h2>ðŸ“‹ Nova Consulta - Escore de PriorizaÃ§Ã£o</h2>
<p>ðŸ§“ Idade do paciente: <strong>{{ idade }}</strong> anos</p>
<form method="POST">
    {% for campo, label, opcoes in [
        ('tipo', 'Tipo de Escoliose', ['1:IdiopÃ¡tica', '3:Neuromuscular', '2:SindrÃ´mica']),
        ('cobb', 'Ã‚ngulo de Cobb', ['1:40Â°-59Â°', '2:60Â°-79Â°', '3:â‰¥80Â°']),
        ('progresso', 'ProgressÃ£o', ['0:Sem', '1:â‰¤10Â°', '2:>10Â°']),
        ('idade_classe', 'Faixa EtÃ¡ria', ['0:>14a', '1:11-14a', '2:â‰¤10a']),
        ('risser', 'Sinal de Risser', ['0:Risser 3-5', '2:Risser 0-2']),
        ('status', 'Menarca / Sexo', ['0:PÃ³s-Menarca', '2:PrÃ©-Menarca / masc']),
        ('comorbidade', 'Comorbidades', ['0:Nenhuma', '1:Gastrostomia/Epilepsia', '2:Traqueo/VNI']),
        ('dor', 'Dor / Funcionalidade', ['0:Nenhuma', '1:Moderada', '2:Intensa']),
        ('tempo', 'Tempo de Espera', ['0:<6 meses', '1:6-12 meses', '2:>12 meses'])
    ] %}
    <label>{{ label }}:
        <select name="{{ campo }}" required>
        {% for opt in opcoes %}
            {% set val, txt = opt.split(':') %}
            <option value="{{ val }}" {% if campo == 'idade_classe' and val == faixa %}selected{% endif %}>{{ txt }}</option>
	    
        {% endfor %}
        </select>
    </label>
    {% endfor %}
    <button type="submit">Salvar Consulta</button>
</form>

{% if historico %}
<h3>ðŸ“‘ HistÃ³rico de Consultas</h3>
<table>
    <thead>
        <tr><th>Data</th><th>Escore</th><th>Prioridade</th></tr>
    </thead>
    <tbody>
    {% for c in historico %}
        <tr class="prioridade-{{ c[3]|lower|replace(' ', '-') }}">
            <td>{{ c[2] }}</td>
            <td>{{ c[4] }}</td>
            <td>{{ c[3] }}</td>
        </tr>
    {% endfor %}
    </tbody>
</table>
{% endif %}

<a href="{{ url_for('painel') }}">â¬… Voltar Ã  lista</a>
{% endblock %}
